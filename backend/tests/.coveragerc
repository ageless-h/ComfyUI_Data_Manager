# Coverage 配置文件
# 控制代码覆盖率分析的行为和报告

[run]
# 源代码路径
source = ../

# 包含的模块
include =
    ../core/*
    ../helpers/*
    ../api/*

# 排除的文件/路径
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */site-packages/*
    */dist-packages/*
    */venv/*
    */env/*
    */virtualenv/*
    */.virtualenv/*
    */migrations/*
    */settings/*
    */wsgi.py
    */__init__.py

# 分支覆盖率
branch = True

# 覆盖率数据文件
data_file = .coverage

# 并行模式（支持多进程）
parallel = False

# 动态上下文
dynamic_context = test_function

[report]
# 精度（小数位数）
precision = 1

# 排除代码行
exclude_lines =
    # 跳过默认的排除项
    pragma: no cover
    def __repr__
    def __str__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstract

    # 跳过调试代码
    if DEBUG:
    if logger.debug:
    if config.DEBUG:

    # 跳过类型检查
    : \.$
    pass$
    \.\.\.$

    # 跳过未使用的导入
    ^import$
    ^from .* import$

# 显示缺失的行号
show_missing = True

# 跳过覆盖的文件
skip_covered = False

# 忽略无源代码的错误
ignore_errors = True

[html]
# HTML 报告目录
directory = htmlcov

# 报告标题
title = ComfyUI Data Manager - Coverage Report

[xml]
# XML 报告输出路径
output = coverage.xml

[json]
# JSON 报告输出路径
output = coverage.json

pretty_print = True
