{"version":3,"file":"ssh.js","sources":["../frontend/src/api/ssh.ts"],"sourcesContent":["/**\n * ComfyUI Data Manager - SSH API\n */\n\nexport interface SSHConnectOptions {\n  host: string;\n  port: number;\n  username: string;\n  password: string;\n}\n\nexport interface SSHConnectResponse {\n  success?: boolean;\n  connection_id: string;\n  host?: string;\n  port?: number;\n  username?: string;\n  root_path?: string;\n  message?: string;\n  error?: string;\n}\n\nexport interface SSHListResponse {\n  files: unknown[];\n  path: string;\n  connection_id: string;\n}\n\n/**\n * Connect to SSH host\n * @param host - Host address\n * @param port - Port number\n * @param username - Username\n * @param password - Password\n * @returns Connection result\n */\nexport async function sshConnect(\n  host: string,\n  port: number,\n  username: string,\n  password: string\n): Promise<SSHConnectResponse> {\n  const response = await fetch(\"/dm/ssh/connect\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      host,\n      port: port || 22,\n      username,\n      password\n    })\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: \"连接失败\" })) as SSHConnectResponse;\n    throw new Error(error.error || error.message || \"SSH 连接失败\");\n  }\n\n  return await response.json() as SSHConnectResponse;\n}\n\n/**\n * Disconnect SSH connection\n * @param connectionId - Connection ID\n * @returns Disconnect result\n */\nexport async function sshDisconnect(\n  connectionId: string\n): Promise<{ success: boolean; message?: string; error?: string }> {\n  const response = await fetch(\"/dm/ssh/disconnect\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ connection_id: connectionId })\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: \"断开失败\" })) as Record<string, unknown>;\n    throw new Error((error.error as string) || (error.message as string) || \"SSH 断开失败\");\n  }\n\n  return await response.json();\n}\n\n/**\n * List remote directory contents\n * @param connectionId - Connection ID\n * @param path - Remote path\n * @returns Directory contents\n */\nexport async function sshList(\n  connectionId: string,\n  path = \".\"\n): Promise<SSHListResponse> {\n  const response = await fetch(\"/dm/ssh/list\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      connection_id: connectionId,\n      path\n    })\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({ error: \"列出目录失败\" })) as Record<string, unknown>;\n    throw new Error((error.error as string) || (error.message as string) || \"SSH 列出目录失败\");\n  }\n\n  return await response.json() as SSHListResponse;\n}\n"],"names":["sshConnect","host","port","username","password","response","error","sshDisconnect","connectionId","sshList","path"],"mappings":"AAoCA,eAAsBA,EACpBC,EACAC,EACAC,EACAC,EAC6B,CAC7B,MAAMC,EAAW,MAAM,MAAM,kBAAmB,CAC9C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CACnB,KAAAJ,EACA,KAAMC,GAAQ,GACd,SAAAC,EACA,SAAAC,CAAA,CACD,CAAA,CACF,EAED,GAAI,CAACC,EAAS,GAAI,CAChB,MAAMC,EAAQ,MAAMD,EAAS,KAAA,EAAO,MAAM,KAAO,CAAE,MAAO,MAAA,EAAS,EACnE,MAAM,IAAI,MAAMC,EAAM,OAASA,EAAM,SAAW,UAAU,CAC5D,CAEA,OAAO,MAAMD,EAAS,KAAA,CACxB,CAOA,eAAsBE,EACpBC,EACiE,CACjE,MAAMH,EAAW,MAAM,MAAM,qBAAsB,CACjD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,cAAeG,EAAc,CAAA,CACrD,EAED,GAAI,CAACH,EAAS,GAAI,CAChB,MAAMC,EAAQ,MAAMD,EAAS,KAAA,EAAO,MAAM,KAAO,CAAE,MAAO,MAAA,EAAS,EACnE,MAAM,IAAI,MAAOC,EAAM,OAAqBA,EAAM,SAAsB,UAAU,CACpF,CAEA,OAAO,MAAMD,EAAS,KAAA,CACxB,CAQA,eAAsBI,EACpBD,EACAE,EAAO,IACmB,CAC1B,MAAML,EAAW,MAAM,MAAM,eAAgB,CAC3C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CACnB,cAAeG,EACf,KAAAE,CAAA,CACD,CAAA,CACF,EAED,GAAI,CAACL,EAAS,GAAI,CAChB,MAAMC,EAAQ,MAAMD,EAAS,KAAA,EAAO,MAAM,KAAO,CAAE,MAAO,QAAA,EAAW,EACrE,MAAM,IAAI,MAAOC,EAAM,OAAqBA,EAAM,SAAsB,YAAY,CACtF,CAEA,OAAO,MAAMD,EAAS,KAAA,CACxB"}